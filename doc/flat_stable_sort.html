<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
          <html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
            <head>
              <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
              <meta content="HTML Tidy for Windows (vers 1st November 2003), see www.w3.org"
                name="generator" />
              <title>Boost C++ Libraries</title>
              <link type="image/ico" href="http://www.boost.org/favicon.ico" rel="icon" />
              <link href="http://www.boost.org/style-v2/section-welcome.css" type="text/css"
                rel="stylesheet" />
              <link rel="stylesheet" type="text/css" href="files/code.css" />
              <!--[if IE 7]> <style type="text/css"> body { behavior: url(http://www.boost.org/style-v2/csshover3.htc); } </style> <![endif]-->
              <meta content="mpr2HgFpodnbF_8fv4qXd9roIClVwtX3C-Kd3F6r61w" name="google-site-verification" />
            </head>
            <!-- Note: Editing website content is documented at:http://www.boost.org/development/website_updating.html-->
            <!--***************************************************************************************** -->
            <!--                                        B O D Y                                           -->
            <!--***************************************************************************************** -->
            <body>
              <div id="heading">
                <div class="heading-inner">
                  <h1 class="heading-title"> <a href="http://www.boost.org/"> <img
                        class="heading-logo" alt="Boost C++ Libraries" src="http://www.boost.org//gfx/space.png" />
                      <span class="heading-boost">Boost</span> <span class="heading-cpplibraries">C++
                        Libraries</span> </a></h1>
                  <p class="heading-quote"> <q>...one of the most highly
                      regarded and expertly designed C++ library projects in the
                      world.</q> <span class="heading-attribution">— <a class="external"
                        href="http://www.gotw.ca/">Herb Sutter</a> and <a class="external"
                        href="http://en.wikipedia.org/wiki/Andrei_Alexandrescu">Andrei
                        Alexandrescu</a>, <a class="external" href="http://safari.awprofessional.com/?XmlId=0321113586">C++
                        Coding Standards</a></span></p>
                </div>
              </div>
              <div class="cuerpo_central"> <br />
                <div class="cuerpo_texto"> <br />
                  <span style="font-size: 32pt;"> <span style="font-weight: bold; color: black;">
                      <a href="index.html">The flat_stable_sort algorithm</a> </span></span><br />
                  <div>
                    <div class="author">
                      <h3 class="author"><br />
                        <span class="firstname"></span></h3>
                      <h3 class="author" style="font-style: italic;"><span class="firstname">Francisco
                          Jose Tapia</span>   Copyright © 2017 Francisco Jose
                        Tapia</h3>
                    </div>
                  </div>
                  <div>
                    <div class="legalnotice">
                      <p><span style="font-style: italic;">Distributed under the
                          Boost Software License, Version 1.0. (See accompanying
                          file LICENSE_1_0.txt or copy at </span><a target="_top"
                          href="file:///LICENSE_1_0.txt" style="font-style: italic;">
                          http://www.boost.org/LICENSE_1_0.txt </a><span style="font-style: italic;">)</span>
                      </p>
                    </div>
                  </div>
                  <br />
                  <span style="font-size: 32pt;font-style: italic; color: black;">
                    PRELIMINARY </span><br />
                  <p>The flat_stable_sort_algorithm had been designed for be
                    included in the Boost Sort Library</p>
                  <br />
                  <p><a name="Introduction"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">1.-
                      Introduction</span></p>
                  <p> </p>
                  <p><a name="description"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">1.1.-
                      Description </span></p>
                  <p><br />
                  </p>
                  <p>This algorithm had been invented and implemented for the
                    Boost library by the author. It's a stable sort with a best
                    case O(N), and an average and worst case O(NlogN)</p>
                  <p><br />
                  </p>
                  <p>The goal of the algorithm is provide a stable sort with a
                    low additional memory.The algorithms provided by the
                    compilers and libraries use an additional memory, usually of
                    a half of the data to sort. This algorithm need an
                    additional memory of 8K.</p>
                  <p><br />
                  </p>
                  <p>The algorithms without additional memory are very slow
                    compared with the algorithms with additional memory. Due
                    this, it's very rare to find implementations outside the
                    research environments.</p>
                  <p><br />
                  </p>
                  <p>This new algorithm provide around 80% - 90% of the speed of
                    the sort algorithms provided by compilers and libraries.
                    This algorithm had been designed for to be really fast when
                    the data are near sorted. Many times the new elements are
                    inserted at end the sorted elements, or some elements are
                    modified, breaking the order of the elements. </p>
                  <p><br />
                  </p>
                  <p>In these cases, the flat stable_sort provide a very fast
                    response, as you can see in the table below, compared with
                    the st::sort std::stable_sort, and the other algorithms of
                    the Boost Sort library.</p>
                  <p><br />
                  </p>
                  <p>The algorithm <span style="font-weight: bold;">use a
                      comparison object</span>, in the same way as the standard
                    library sort algorithms. If you don't define it, the
                    comparison object defaults to std::less, which uses the &lt;
                    operator internally for comparisons.</p>
                  <p><br />
                  </p>
                  <p>All the algorithms of the benchmark use comparison object,
                    except spreadsort, which use a different method ( You can
                    see at detail in the Boost Sort documentation).</p>
                  <p><br />
                  </p>
                  <p><span tyle="font-weight: bold;"></span>These two tables
                    show the results with numbers. The results with objects and
                    strings are similar. In the folder  <span style="font-weight: bold;">result</span>,
                    you can see the results obtained  with numbers, strings and
                    objects of different sizes, compared with the others
                    algorithms in Linux with GCC. 6.0.</p>
                  <p><br />
                  </p>
                  Different compilers can provide different results, due, mainly
                  of the quality of the optimization of the compilers.
                  <p><br />
                  </p>
                  <p><br />
                  </p>
                  <p><span style="font-family: monospace;">************************************************************<br />
                      **                                                       
                      **<br />
                      **               B O O S T      S O R T                  
                      **<br />
                      **              S I N G L E    T H R E A D               
                      **<br />
                      **          I N T E G E R    B E N C H M A R K           
                      **<br />
                      **                                                       
                      **<br />
                      **        SORT OF 100 000 000 NUMBERS OF 64 BITS         
                      **<br />
                      **                                                       
                      **<br />
************************************************************<br />
                      <br />
                      [ 1 ] std::sort   [ 2 ] pdqsort          [ 3 ]
                      std::stable_sort <br />
                      [ 4 ] spin_sort   [ 5 ] flat_stable_sort [ 6 ] </span><span
                      style="font-family: monospace;"><span style="font-family: monospace;">spreadsort</span>
                      <br />
                      <br />
                                          |      |      |      |      |     
                      |      |<br />
                                          | [ 1 ]| [ 2 ]| [ 3 ]| [ 4 ]| [ 5 ]| [
                      6 ]|<br />
--------------------+------+------+------+------+------+------+<br />
                      random              | 8.20 | 3.90 | 8.51 | 9.45 |10.78 |
                      4.22 |<br />
                                          |      |      |      |      |     
                      |      |<br />
                      sorted              | 1.91 | 0.12 | 4.86 | 0.06 | 0.07 |
                      0.06 |<br />
                      sorted + 0.1% end   | 6.50 | 2.86 | 4.89 | 0.41 | 0.36 |
                      3.14 |<br />
                      sorted +   1% end   |14.02 | 3.35 | 4.96 | 0.55 | 0.49 |
                      3.62 |<br />
                      sorted +  10% end   | 6.78 | 4.10 | 5.71 | 1.31 | 1.39 |
                      4.31 |<br />
                                          |      |      |      |      |     
                      |      |<br />
                      sorted + 0.1% mid   | 4.56 | 3.22 | 6.51 | 1.85 | 2.47 |
                      3.22 |<br />
                      sorted +   1% mid   | 4.61 | 3.57 | 7.03 | 2.07 | 3.06 |
                      3.77 |<br />
                      sorted +  10% mid   | 6.48 | 4.64 | 9.42 | 3.92 | 5.46 |
                      4.93 |<br />
                                          |      |      |      |      |     
                      |      |<br />
                      reverse sorted      | 1.37 | 0.26 | 5.10 | 0.13 | 0.14 |
                      1.77 |<br />
                      rv sorted + 0.1% end| 7.64 | 2.89 | 5.21 | 0.52 | 0.41 |
                      2.79 |<br />
                      rv sorted +   1% end| 5.16 | 3.27 | 5.27 | 0.65 | 0.55 |
                      3.40 |<br />
                      rv sorted +  10% end| 4.78 | 4.11 | 6.01 | 1.43 | 1.46 |
                      4.31 |<br />
                                          |      |      |      |      |     
                      |      |<br />
                      rv sorted + 0.1% mid| 4.53 | 3.22 | 6.51 | 1.85 | 2.46 |
                      3.22 |<br />
                      rv sorted +   1% mid| 4.61 | 3.57 | 7.03 | 2.07 | 3.16 |
                      3.76 |<br />
                      rv sorted +  10% mid| 6.47 | 4.64 | 9.42 | 3.92 | 5.46 |
                      4.93 |<br />
--------------------+------+------+------+------+------+------+</span></p>
                  <p><br />
                  </p>
                  <p>Memory used by the stable sort algorithms</p>
                  <table border="1" style="width: 386px; height: 228px;">
                    <tbody>
                      <tr>
                        <td><span style="font-weight: bold;">Algorithm</span></td>
                        <td><span style="font-weight: bold;">Memory used ( MB)</span></td>
                      </tr>
                      <tr>
                        <td>std::stable_sort</td>
                        <td>1177</td>
                      </tr>
                      <tr>
                        <td style="width: 180.317px;">spinsort</td>
                        <td style="width: 193.683px;">1175</td>
                      </tr>
                      <tr>
                        <td>flat_stable_sort</td>
                        <td>788</td>
                      </tr>
                      <tr>
                        <td>spreadsort</td>
                        <td>785</td>
                      </tr>
                    </tbody>
                  </table>
                  <br />
                  <p><br />
                  </p>
                  <p> The algorithms are <span style="font-weight: bold;">exception
                      safe</span>, meaning that,  the exceptions generated by
                    the algorithms guarantee the integrity of the objects to
                    sort, but not their relative order. If the exception is
                    generated inside the objects (in the move or in the copy
                    constructor.. ) the results can be unpredictable.<br />
                    <br />
                    This library is <span style="font-weight: bold;">include
                      only.</span> There is no need to link with any external
                    static or dynamic library. This doesn't  depend on any other
                    boost files, variables or libraries or any other external
                    libraries. To use this library, just include the files in
                    the boost/sort/parallel folder.</p>
                  <br />
                  <span style="font-style: italic;"></span><br />
                  <p><a name="programming"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">1.2.-
                      Programming </span> </p>
                    <br />
                  You only need to include the file
                  boost/sort/flat_stable_sort/flat_stable_sort.hpp <br />
                  <br />
                  <div class="caja_codigo">
                    <pre><code><span style="font: 9pt Monospace;"><span class="style9"><br />#include &lt;boost/sort/flat_stable_sort/flat_stable_sort.hpp&gt;</span></span>
          </code></pre>
        </div>
        <br />
        All the functions and definitions are in the namespace
        boost::sort<br /><br /><br />
          <span style="font-size: 16pt;font-weight: bold; color: black;"></span>
        <div class="caja_codigo">
          <pre><code><span style="font: 9pt Monospace;"><span class="style9"><br />#include &lt;iostream&gt;
#include &lt;vector&gt;<br /></span></span></code><code><span style="font: 9pt Monospace;"><span
class="style9"><code><span style="font: 9pt Monospace;"><span class="style9">#include &lt;random&gt;</span></span></code></span></span></code><br /><code><span
style="font: 9pt Monospace;"><span class="style9"><code><span style="font: 9pt Monospace;"><span
class="style9"><code><span style="font: 9pt Monospace;"><span class="style9"></span></span></code></span></span></code>#include &lt;boost/sort/flat_stable_sort/flat_stable_sort.hpp&gt;<br /></span><span
class="style5">namespace </span><span class="style11">bs </span><span class="style10">= </span><span
class="style16">boost</span><span class="style10">::</span><span class="style16">sort</span><span
class="style11"></span><span class="style10">;
		  
</span><span class="style5">int </span><span class="style11">main </span><span class="style10">(</span><span
class="style5">void</span><span class="style10">)
{   </span><span class="style2">//-------------- begin------------
    </span><span class="style16">std</span><span class="style10">::</span><span
class="style16">mt19937_64 </span><span class="style11">my_rand</span><span class="style10">(</span><span
class="style4">0</span><span class="style10">);
    </span><span class="style5">const uint32_t </span><span class="style11">NMAX </span><span
class="style10">= </span><span class="style4">1000000</span><span class="style10">;
    </span><span class="style16">std</span><span class="style10">::</span><span
class="style16">vector </span><span class="style10">&lt;</span><span class="style5">uint64_t</span><span
class="style10">&gt; </span><span class="style11">A</span><span class="style10">, </span><span
class="style11">B</span><span class="style10">;<br /><br /> </span><span class="style5">   for </span><span
class="style10">(</span><span class="style5">uint32_t </span><span class="style11">i </span><span
class="style10">=</span><span class="style4"> 0</span><span class="style10">; </span><span
class="style11">i </span><span class="style10">&lt; </span><span class="style11">NMAX</span><span
class="style10">; ++</span><span class="style11">i</span><span class="style10">)  </span><span
class="style11">A</span><span class="style10">.</span><span class="style16">push_back</span><span
class="style10">(</span><span class="style11">my_rand</span><span class="style10">());
    </span><span class="style11">B </span><span class="style10">= </span><span class="style11">A</span><span
class="style10">;
    </span><span class="style11">std::stable_</span><span class="style10"></span><span
class="style11">sort </span><span class="style10">(</span><span class="style11">A</span><span
class="style10">.</span><span class="style16">begin</span><span class="style10">(), </span><span
class="style11">A</span><span class="style10">.</span><span class="style16">end</span><span
class="style10">());
    </span><span class="style11">bs</span><span class="style10">::</span><span class="style11">flat_stable_sort </span><span
class="style10">(</span><span class="style11">B</span><span class="style10">.</span><span
class="style16">begin</span><span class="style10">(), </span><span class="style11">B</span><span
class="style10">.</span><span class="style16">end</span><span class="style10">());

    </span><span class="style5">for </span><span class="style10">(</span><span class="style5">uint32_t </span><span
class="style11">i </span><span class="style10">=</span><span class="style4"> 0</span><span
class="style10">; </span><span class="style11">i </span><span class="style10">&lt; </span><span
class="style11">NMAX</span><span class="style10">; ++</span><span class="style11">i</span><span
class="style10">)
        </span><span class="style5">if </span><span class="style10">(</span><span
class="style11">A</span><span class="style10">[</span><span class="style11">i</span><span
class="style10">] != </span><span class="style11">B</span><span class="style10">[</span><span
class="style11">i</span><span class="style10">])  </span><span class="style16">std</span><span
class="style10">::</span><span class="style16">cout</span><span class="style10">&lt;&lt;</span><span
class="style6">"Error in the sorting process\n"</span><span class="style10">;
    </span><span class="style5">return </span><span class="style4">0</span><span
class="style10">;
};</span></span></code></pre>
          <span class="style9"> </span> </div>
        <br /><a name="programming"></a> <span style="font-size: 18pt;font-weight: bold; color: black;">1.3.-
            Description of the algorithm <br /></span><br />If you want a detailed description of the algorithm you can find it in the next document <a
target="_blank" href="flat_stable_sort_eng.pdf">flat_stable_sort_eng.pdf</a></div>
      <br /><br /><br />
      <table width="100%" xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision">
        <tbody>
          <tr>
            <td align="left">
              <p><small>Last revised: May 30, 2017</small></p>
            </td>
            <td> <br />
            </td>
          </tr>
        </tbody>
      </table>
      <hr />
      <div id="footer">
        <div id="footer-left">
          <div id="copyright">
            <p>Copyright Francisco Jose Tapia 2017.</p>
          </div>
          <div id="license">
            <p>Distributed under the <a class="internal" href="/LICENSE_1_0.txt">Boost
                Software License, Version 1.0</a>.</p>
          </div>
        </div>
        <div id="footer-right">
          <div id="banners">
            <p id="banner-xhtml"> <a class="external" href="http://validator.w3.org/check?uri=referer">XHTML 1.0</a></p>
            <p id="banner-css"> <a class="external" href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a></p>
            <p id="banner-osi"> <a class="external" href="http://www.opensource.org/docs/definition.php">OSI Certified</a></p>
          </div>
        </div>
      </div>
    </div>
</body></html>